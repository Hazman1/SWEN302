(function($){foswiki.Edit={validateSuppressed:false};foswiki.Edit.validateMandatoryFields=function(){if(foswiki.Edit.validateSuppressed){return true}var alerts=[];$("select.foswikiMandatory").each(function(index,el){var one=false;var k;for(k=0;k<el.options.length;k=k+1){if(el.options[k].selected){one=true;break}}if(!one){alerts.push("The required form field '"+el.name+"' has no value.")}});$("textarea.foswikiMandatory, input.foswikiMandatory").each(function(index,el){if(el.value===null||el.value.length===0){alerts.push("The required form field '"+el.name+"' has no value.")}});if(alerts.length>0){alert(alerts.join("\n"));return false}else{return true}};$(function(){try{document.main.text.focus()}catch(er){}$(document.forms[name="main"]).submit(function(e){return foswiki.Edit.validateMandatoryFields()});$(".foswikiTextarea").keydown(function(e){var code;if(e.keyCode){code=e.keyCode}return code!==27});$(".foswikiButtonCancel").click(function(e){foswiki.Edit.validateSuppressed=true})})})(jQuery);